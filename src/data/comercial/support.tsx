import { RightOutlined } from '@ant-design/icons';
import { Button, Space, Tag } from 'antd';
import type { TableProps } from 'antd';
import ActionsDropdown from '../utils/actionsDropdown';

export interface DataType {
  key: string;

  // Identificação do ticket / cliente
  ticket: string;          // ID do chamado
  company: string;         // Empresa cliente
  cnpj: string;
  contact: string;         // Pessoa que abriu
  email: string;
  phone?: string;
  role?: string;           // Cargo do solicitante

  // Vinculação ao contrato/serviço
  service: string;         // Serviço contratado
  contractId?: string;     // Número/ID interno do contrato/projeto
  orderId?: string;        // Opcional: número do pedido/proposta

  // Detalhes do contato
  channel: string;         // Portal, E-mail, Telefone, WhatsApp, etc.
  subject: string;         // Assunto resumido
  message: string;         // Mensagem (trecho)
  receivedAt: string;      // DD/MM/YYYY HH:mm
  lastUpdate: string;      // Última atualização

  // Tratativa e SLA
  priority: 'Alta' | 'Média' | 'Baixa';
  status: string[];        // Novo, Em atendimento, Aguardando cliente, Aguardando órgão, Em execução, Resolvido, Encerrado, Reaberto
  slaDue: string;          // Prazo do SLA (data/hora)
  assignedTo?: string;     // Responsável interno
}

export const columns: TableProps<DataType>['columns'] = [
  {
    title: 'Ticket',
    dataIndex: 'ticket',
    key: 'ticket',
  },
  { title: 'Empresa', dataIndex: 'company', key: 'company' },
  { title: 'CNPJ', dataIndex: 'cnpj', key: 'cnpj' },
  { title: 'Contato', dataIndex: 'contact', key: 'contact' },
  { title: 'Email', dataIndex: 'email', key: 'email' },
  { title: 'Telefone', dataIndex: 'phone', key: 'phone' },
  { title: 'Cargo', dataIndex: 'role', key: 'role' },

  { title: 'Serviço', dataIndex: 'service', key: 'service' },
  { title: 'Contrato', dataIndex: 'contractId', key: 'contractId' },
  { title: 'Pedido', dataIndex: 'orderId', key: 'orderId' },

  { title: 'Canal', dataIndex: 'channel', key: 'channel' },
  { title: 'Assunto', dataIndex: 'subject', key: 'subject' },
  {
    title: 'Mensagem',
    dataIndex: 'message',
    key: 'message',
    render: (text) => (
      <span style={{ display: 'inline-block', maxWidth: 360, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>
        {text}
      </span>
    ),
  },
  { title: 'Recebido em', dataIndex: 'receivedAt', key: 'receivedAt' },
  { title: 'Última atualização', dataIndex: 'lastUpdate', key: 'lastUpdate' },

  {
    title: 'Prioridade',
    dataIndex: 'priority',
    key: 'priority',
    render: (level) => {
      const color = level === 'Alta' ? 'volcano' : level === 'Média' ? 'gold' : 'green';
      return <Tag color={color}>{String(level).toUpperCase()}</Tag>;
    },
  },
  {
    title: 'Status',
    key: 'status',
    dataIndex: 'status',
    render: (_, { status }) => (
      <>
        {status.map((tag) => {
          let color = 'blue';
          if (tag === 'Novo') color = 'geekblue';
          if (tag === 'Em atendimento') color = 'processing';
          if (tag === 'Aguardando cliente') color = 'gold';
          if (tag === 'Aguardando órgão') color = 'purple';
          if (tag === 'Em execução') color = 'cyan';
          if (tag === 'Resolvido') color = 'green';
          if (tag === 'Encerrado') color = 'default';
          if (tag === 'Reaberto') color = 'magenta';
          return (
            <Tag color={color} key={tag}>
              {tag}
            </Tag>
          );
        })}
      </>
    ),
  },
  { title: 'SLA até', dataIndex: 'slaDue', key: 'slaDue' },
  { title: 'Responsável', dataIndex: 'assignedTo', key: 'assignedTo' },


];

export const data: DataType[] = [
  {
    key: '1',
    ticket: 'SUP-2025-0001',
    company: 'AgroVida S/A',
    cnpj: '98.765.432/0001-55',
    contact: 'Mariana Souza',
    email: 'mariana.souza@agrovida.com',
    phone: '(16) 3232-1000',
    role: 'Compras',
    service: 'Licença Ambiental (LP/LI/LO)',
    contractId: 'CTR-ENV-0142',
    orderId: 'ORC-3187',
    channel: 'Portal do Cliente',
    subject: 'Status do protocolo na CETESB',
    message: 'Poderiam confirmar se o protocolo da LI já consta no sistema e prazos?',
    receivedAt: '03/09/2025 09:35',
    lastUpdate: '03/09/2025 11:10',
    priority: 'Alta',
    status: ['Em atendimento'],
    slaDue: '03/09/2025 18:00',
    assignedTo: 'Mariana Silva',
  },
  {
    key: '2',
    ticket: 'SUP-2025-0002',
    company: 'Tech Solutions Ltda',
    cnpj: '12.345.678/0001-10',
    contact: 'Carlos Andrade',
    email: 'c.andrade@techsolutions.com',
    phone: '(11) 98765-4321',
    role: 'COO',
    service: 'Alvará de Funcionamento',
    contractId: 'CTR-ALV-1020',
    orderId: 'ORC-3051',
    channel: 'E-mail',
    subject: 'Envio de planta atualizada',
    message: 'Segue planta revisada da matriz e das 2 filiais para anexar ao processo.',
    receivedAt: '02/09/2025 17:58',
    lastUpdate: '03/09/2025 08:12',
    priority: 'Média',
    status: ['Em execução'],
    slaDue: '04/09/2025 12:00',
    assignedTo: 'Rafael Souza',
  },
  {
    key: '3',
    ticket: 'SUP-2025-0003',
    company: 'BioPharma Brasil',
    cnpj: '22.333.444/0001-88',
    contact: 'Pedro Lima',
    email: 'pedro.lima@biopharma.com',
    phone: '(19) 3777-5566',
    role: 'Gerente de P&D',
    service: 'Alvará Sanitário',
    contractId: 'CTR-SAN-2099',
    orderId: 'ORC-2911',
    channel: 'Telefone',
    subject: 'Checklist de documentos',
    message: 'Preciso confirmar lista de documentos exigidos para renovação do alvará.',
    receivedAt: '02/09/2025 10:22',
    lastUpdate: '02/09/2025 10:45',
    priority: 'Baixa',
    status: ['Resolvido'],
    slaDue: '03/09/2025 10:00',
    assignedTo: 'Fernanda Rocha',
  },
  {
    key: '4',
    ticket: 'SUP-2025-0004',
    company: 'TransLog Transportes',
    cnpj: '77.888.999/0001-44',
    contact: 'Beatriz Martins',
    email: 'b.martins@translog.com',
    phone: '(81) 97777-8888',
    role: 'Facilities',
    service: 'AVCB (Bombeiros)',
    contractId: 'CTR-FIR-4470',
    orderId: 'ORC-2770',
    channel: 'WhatsApp',
    subject: 'Agendamento de vistoria',
    message: 'Conseguem sugerir datas para a vistoria do Corpo de Bombeiros?',
    receivedAt: '01/09/2025 08:05',
    lastUpdate: '01/09/2025 16:30',
    priority: 'Média',
    status: ['Aguardando órgão'],
    slaDue: '05/09/2025 18:00',
    assignedTo: 'João Oliveira',
  },
  {
    key: '5',
    ticket: 'SUP-2025-0005',
    company: 'Green Ambiental',
    cnpj: '88.999.000/0001-55',
    contact: 'Eduardo Ramos',
    email: 'eduardo.ramos@greenambiental.com',
    phone: '(51) 3232-9090',
    role: 'Diretor',
    service: 'CTF/IBAMA',
    contractId: 'CTR-IB-3302',
    orderId: 'ORC-3210',
    channel: 'Portal do Cliente',
    subject: 'Inclusão de atividade',
    message: 'Solicito inclusão de novas atividades no CTF e confirmação do débito quitado.',
    receivedAt: '01/09/2025 10:48',
    lastUpdate: '02/09/2025 14:02',
    priority: 'Baixa',
    status: ['Em execução'],
    slaDue: '06/09/2025 12:00',
    assignedTo: 'Lucas Pereira',
  },
  {
    key: '6',
    ticket: 'SUP-2025-0006',
    company: 'Energia Solar Plus',
    cnpj: '44.555.666/0001-11',
    contact: 'Rafael Souza',
    email: 'rafael.souza@esolarplus.com',
    phone: '(85) 3344-7788',
    role: 'Projetos',
    service: 'Licença de Operação (LO)',
    contractId: 'CTR-LO-1188',
    orderId: 'ORC-2874',
    channel: 'Portal do Cliente',
    subject: 'Prazo da renovação LO',
    message: 'Alguma atualização do parecer técnico sobre a usina de 3 MWp?',
    receivedAt: '31/08/2025 09:11',
    lastUpdate: '02/09/2025 09:00',
    priority: 'Alta',
    status: ['Em atendimento'],
    slaDue: '03/09/2025 17:00',
    assignedTo: 'Gustavo Nogueira',
  },
  {
    key: '7',
    ticket: 'SUP-2025-0007',
    company: 'Food Service Brasil',
    cnpj: '55.666.777/0001-22',
    contact: 'Amanda Costa',
    email: 'amanda.costa@foodbr.com',
    phone: '(71) 95555-0000',
    role: 'Jurídico',
    service: 'Outorga de Uso de Água',
    contractId: 'CTR-OUT-7741',
    orderId: 'ORC-2605',
    channel: 'E-mail',
    subject: 'Comprovantes de medição',
    message: 'Encaminho as últimas leituras do hidrômetro para anexar ao processo.',
    receivedAt: '30/08/2025 11:07',
    lastUpdate: '30/08/2025 11:40',
    priority: 'Média',
    status: ['Aguardando cliente'],
    slaDue: '04/09/2025 10:00',
    assignedTo: 'Renata Carvalho',
  },
  {
    key: '8',
    ticket: 'SUP-2025-0008',
    company: 'EducaMais Online',
    cnpj: '66.777.888/0001-33',
    contact: 'João Oliveira',
    email: 'joao.oliveira@educamais.com',
    phone: '(11) 91212-3434',
    role: 'Operações',
    service: 'Alvará de Funcionamento',
    contractId: 'CTR-ALV-1044',
    orderId: 'ORC-3199',
    channel: 'Portal do Cliente',
    subject: 'Dúvida sobre taxa municipal',
    message: 'Qual guia de recolhimento devemos pagar para protocolar o pedido?',
    receivedAt: '29/08/2025 16:30',
    lastUpdate: '30/08/2025 09:05',
    priority: 'Baixa',
    status: ['Resolvido'],
    slaDue: '31/08/2025 18:00',
    assignedTo: 'Paula Ferreira',
  },
  {
    key: '9',
    ticket: 'SUP-2025-0009',
    company: 'Construmax Engenharia',
    cnpj: '11.222.333/0001-77',
    contact: 'Fernanda Rocha',
    email: 'fernanda.rocha@construmax.com.br',
    phone: '(31) 99888-1234',
    role: 'Engenheira',
    service: 'AVCB + Projeto de incêndio',
    contractId: 'CTR-FIR-4512',
    orderId: 'ORC-2560',
    channel: 'Telefone',
    subject: 'Análise do PPCI',
    message: 'O PPCI enviado atende às últimas exigências do CBMMG?',
    receivedAt: '28/08/2025 15:22',
    lastUpdate: '28/08/2025 17:05',
    priority: 'Média',
    status: ['Em atendimento'],
    slaDue: '03/09/2025 12:00',
    assignedTo: 'Ricardo Almeida',
  },
  {
    key: '10',
    ticket: 'SUP-2025-0010',
    company: 'Moda & Estilo LTDA',
    cnpj: '33.444.555/0001-99',
    contact: 'Juliana Mendes',
    email: 'juliana.mendes@modaestilo.com',
    phone: '(41) 91234-5678',
    role: 'Marketing',
    service: 'Licença de Publicidade',
    contractId: 'CTR-PUB-3300',
    orderId: 'ORC-2450',
    channel: 'WhatsApp',
    subject: 'Arte aprovada e dimensões',
    message: 'Arte final dos outdoors está anexada. As dimensões estão corretas?',
    receivedAt: '27/08/2025 10:08',
    lastUpdate: '27/08/2025 12:40',
    priority: 'Baixa',
    status: ['Em execução'],
    slaDue: '01/09/2025 18:00',
    assignedTo: 'Tatiane Alves',
  },
  {
    key: '11',
    ticket: 'SUP-2025-0011',
    company: 'Finance Group S/A',
    cnpj: '99.000.111/0001-66',
    contact: 'Tatiane Alves',
    email: 'tatiane.alves@financegroup.com',
    phone: '(11) 4002-8922',
    role: 'Administração',
    service: 'Mudança de Endereço - Licenças',
    contractId: 'CTR-MUD-8821',
    orderId: 'ORC-3002',
    channel: 'Portal do Cliente',
    subject: 'Transferência de alvarás',
    message: 'Há pendências para transferência dos alvarás para o novo prédio?',
    receivedAt: '26/08/2025 09:55',
    lastUpdate: '02/09/2025 09:40',
    priority: 'Alta',
    status: ['Em atendimento'],
    slaDue: '03/09/2025 16:00',
    assignedTo: 'Amanda Costa',
  },
  {
    key: '12',
    ticket: 'SUP-2025-0012',
    company: 'Mega Indústria Metalúrgica',
    cnpj: '10.111.222/0001-77',
    contact: 'Lucas Pereira',
    email: 'lucas.pereira@megaind.com',
    phone: '(47) 98888-5555',
    role: 'Facilities',
    service: 'Renovação Ambiental + Sanitária',
    contractId: 'CTR-REN-5500',
    orderId: 'ORC-2401',
    channel: 'E-mail',
    subject: 'Laudos complementares',
    message: 'Envio laudos de ruído e efluentes solicitados na última reunião.',
    receivedAt: '25/08/2025 18:03',
    lastUpdate: '26/08/2025 08:10',
    priority: 'Média',
    status: ['Em execução'],
    slaDue: '29/08/2025 12:00',
    assignedTo: 'Mariana Silva',
  },
  {
    key: '13',
    ticket: 'SUP-2025-0013',
    company: 'Travel Tour Viagens',
    cnpj: '20.222.333/0001-88',
    contact: 'Renata Carvalho',
    email: 'renata.carvalho@traveltour.com',
    phone: '(21) 97676-1212',
    role: 'Gerente',
    service: 'Enquadramento CNAE',
    contractId: 'CTR-REG-6610',
    orderId: 'ORC-2333',
    channel: 'Portal do Cliente',
    subject: 'Retorno da análise fiscal',
    message: 'Algum parecer sobre ajustes de CNAE e impactos nas licenças?',
    receivedAt: '24/08/2025 08:40',
    lastUpdate: '31/08/2025 14:15',
    priority: 'Baixa',
    status: ['Aguardando órgão'],
    slaDue: '06/09/2025 10:00',
    assignedTo: 'João Oliveira',
  },
  {
    key: '14',
    ticket: 'SUP-2025-0014',
    company: 'Saúde & Vida',
    cnpj: '30.333.444/0001-99',
    contact: 'Gustavo Nogueira',
    email: 'gustavo.nogueira@saudevida.com',
    phone: '(11) 91111-2222',
    role: 'Operações',
    service: 'Alvará Sanitário (Clínica)',
    contractId: 'CTR-SAN-2120',
    orderId: 'ORC-2290',
    channel: 'Telefone',
    subject: 'Adequações de infraestrutura',
    message: 'Confirma se precisamos adequar sala de esterilização conforme RDC?',
    receivedAt: '23/08/2025 13:12',
    lastUpdate: '23/08/2025 16:40',
    priority: 'Alta',
    status: ['Em atendimento'],
    slaDue: '24/08/2025 12:00',
    assignedTo: 'Paula Ferreira',
  },
  {
    key: '15',
    ticket: 'SUP-2025-0015',
    company: 'AutoCenter Brasil',
    cnpj: '40.444.555/0001-11',
    contact: 'Paula Ferreira',
    email: 'paula.ferreira@autocenter.com',
    phone: '(19) 98888-1111',
    role: 'Gerente',
    service: 'AVCB + Treinamento',
    contractId: 'CTR-FIR-4702',
    orderId: 'ORC-2205',
    channel: 'Portal do Cliente',
    subject: 'Certificados dos brigadistas',
    message: 'Os certificados do último treinamento já estão disponíveis?',
    receivedAt: '22/08/2025 18:03',
    lastUpdate: '23/08/2025 10:00',
    priority: 'Baixa',
    status: ['Resolvido'],
    slaDue: '25/08/2025 18:00',
    assignedTo: 'Rafael Souza',
  },
  {
    key: '16',
    ticket: 'SUP-2025-0016',
    company: 'SmartHome Solutions',
    cnpj: '50.555.666/0001-22',
    contact: 'Ricardo Almeida',
    email: 'ricardo.almeida@smarthome.com',
    phone: '(11) 95555-9999',
    role: 'Head de Produto',
    service: 'Conformidade INMETRO',
    contractId: 'CTR-QUAL-9001',
    orderId: 'ORC-2188',
    channel: 'LinkedIn',
    subject: 'Cronograma de auditoria',
    message: 'Conseguem compartilhar cronograma da auditoria e lista de verificação?',
    receivedAt: '21/08/2025 11:29',
    lastUpdate: '21/08/2025 12:05',
    priority: 'Média',
    status: ['Em execução'],
    slaDue: '26/08/2025 09:00',
    assignedTo: 'Lucas Pereira',
  },
  {
    key: '17',
    ticket: 'SUP-2025-0017',
    company: 'Pet Lovers',
    cnpj: '60.666.777/0001-33',
    contact: 'Carla Souza',
    email: 'carla.souza@petlovers.com',
    phone: '(48) 97777-4444',
    role: 'Sócia',
    service: 'Alvará de Funcionamento + Sanitário',
    contractId: 'CTR-ALV-1050',
    orderId: 'ORC-2102',
    channel: 'Portal do Cliente',
    subject: 'Envio de notas fiscais',
    message: 'Anexo NF das adequações para comprovação junto ao órgão.',
    receivedAt: '20/08/2025 19:10',
    lastUpdate: '21/08/2025 08:22',
    priority: 'Baixa',
    status: ['Aguardando órgão'],
    slaDue: '30/08/2025 17:00',
    assignedTo: 'André Barbosa',
  },
  {
    key: '18',
    ticket: 'SUP-2025-0018',
    company: 'ImobiReal Consultoria',
    cnpj: '70.777.888/0001-44',
    contact: 'André Barbosa',
    email: 'andre.barbosa@imobireal.com',
    phone: '(11) 93333-8888',
    role: 'Diretor',
    service: 'Licença de Publicidade',
    contractId: 'CTR-PUB-3320',
    orderId: 'ORC-2066',
    channel: 'E-mail',
    subject: 'Revisão de layout do letreiro',
    message: 'Poderiam validar o layout final antes de solicitar a vistoria?',
    receivedAt: '19/08/2025 10:02',
    lastUpdate: '19/08/2025 12:44',
    priority: 'Baixa',
    status: ['Em atendimento'],
    slaDue: '21/08/2025 18:00',
    assignedTo: 'Mariana Silva',
  },
  {
    key: '19',
    ticket: 'SUP-2025-0019',
    company: 'StartUpX Inovação',
    cnpj: '80.888.999/0001-55',
    contact: 'Sofia Lima',
    email: 'sofia.lima@startupx.com',
    phone: '(11) 92222-1111',
    role: 'COO',
    service: 'AVCB + Plano de Emergência',
    contractId: 'CTR-FIR-4801',
    orderId: 'ORC-2050',
    channel: 'Chatbot',
    subject: 'Documentos pendentes',
    message: 'Qual documento ainda falta para concluir o plano de emergência?',
    receivedAt: '18/08/2025 22:47',
    lastUpdate: '19/08/2025 09:30',
    priority: 'Média',
    status: ['Aguardando cliente'],
    slaDue: '23/08/2025 12:00',
    assignedTo: 'Gustavo Nogueira',
  },
  {
    key: '20',
    ticket: 'SUP-2025-0020',
    company: 'Global Import Export',
    cnpj: '90.999.000/0001-66',
    contact: 'Henrique Duarte',
    email: 'henrique.duarte@globalimport.com',
    phone: '(92) 91111-9999',
    role: 'Logística',
    service: 'Autorização MTR (Resíduos)',
    contractId: 'CTR-RES-7710',
    orderId: 'ORC-2007',
    channel: 'Portal do Cliente',
    subject: 'Confirmação de cadastro no sistema',
    message: 'Cadastro no sistema do órgão foi validado? Precisamos emitir o primeiro MTR.',
    receivedAt: '17/08/2025 07:55',
    lastUpdate: '01/09/2025 10:12',
    priority: 'Alta',
    status: ['Reaberto'],
    slaDue: '03/09/2025 15:00',
    assignedTo: 'Renata Carvalho',
  },
];
